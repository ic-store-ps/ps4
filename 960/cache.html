<html manifest="psfree_lapse.cache">
  <head>
    <meta charset="utf-8">
    <title>ic Store HOST Jailbreak</title>
    <style>
      body {
        background:url('icon0.png');
        background-color: #252526;
        color: #cccccc;
        font-family: "Segoe UI", Tahoma, sans-serif;
        text-align: center;
      }
      h2 {
        margin-bottom: 20px;
      }
      #console {
        font-family: monospace;
        background-color: #1e1e1e;
        color: #cccccc;
        border: 1px solid #3c3c3c;
        padding: 12px;
        border-radius: 6px;
        margin-top: 20px;
        text-align: left;
      }
      #jailbreakBtn {
        margin-top: 20px;
        padding: 12px 24px;
        font-size: 18px;
        font-weight: bold;
        border: none;
        border-radius: 6px;
        background: #555555;
        color: #aaaaaa;
        cursor: not-allowed;
        opacity: 0.7;
        box-shadow: none;
      }
      footer {
        margin-top: 30px;
        font-size: 14px;
        color: #888;
      }
    </style>
  </head>
  <body>
    <h2> PS4IDEA HOST  7.00 - 9.60 n</h2>
    <div>
      <button id="jailbreakBtn" disabled>Start Jailbreak</button>

    </div>
    <pre id="console"></pre>
    <footer>
      
    </footer>
  </body>
  <script>
  // Logging utility
  const outputConsole = document.getElementById("console");
  window.log = (msg) => { outputConsole.textContent += msg + "\n"; };

  // Download progress (% display)
  function DLProgress(e) {
    const percent = Math.round((e.loaded / e.total) * 100);
    window.log(`[CACHE] Downloading... ${percent}% complete.`);
  }

  // On cache complete
  function DisplayCacheProgress() {
    window.log(" ");
    window.log("[SUCCESS] Cache installed successfully.");
    window.log("Going to index page in 2 seconds...");

    setTimeout(function () {
      window.location.href = "index.html"; // ✅ المهم
    }, 2000);
  }

  // Event listeners
  window.applicationCache.addEventListener("progress", DLProgress, false);
  window.applicationCache.oncached = function () { DisplayCacheProgress(); };
  window.applicationCache.onupdateready = function () { DisplayCacheProgress(); };

  // Initialization message on DOM load
 document.addEventListener("DOMContentLoaded", () => {
  outputConsole.textContent = "";
  const enabled = localStorage.getItem("autoStartEnabled") === "1";
  window.log("AutoStart: " + (enabled ? "ON" : "OFF"));
  window.log("AppCache download initiating...");
  window.log("Please wait, this may take a few seconds.");
});
</script>
</html>
